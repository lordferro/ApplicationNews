!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},n=t.parcelRequired722;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired722=n),n.register("hKHmD",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}}));var o="fav-icon-add";function i(e){var t=e.publishedDate,r=e.sectionName,a=e.articleTitle,n=e.shortDescription,i=e.urlOriginalArticle,c=e.imgUrl,l=e.articleId,s=n;if(n.length>110){var d=n.indexOf(" ",110);d>0&&(s=n.slice(0,d)+"...")}var u=a;if(a.length>58){var v=a.indexOf(" ",44);v>0&&(u=a.slice(0,v)+"...")}var m="Add to favorites",f=localStorage.getItem("favorites");if(f){var h=JSON.parse(f),g=Object.keys(h),_=!0,y=!1,b=void 0;try{for(var p,S=g[Symbol.iterator]();!(_=(p=S.next()).done);_=!0){var E=p.value,w=h["".concat(E)],T=w.id,O=w._id,A=w.slug_name;l===(T||O||A)?(m="Remove from favorites",o="fav-icon-remove"):o="fav-icon-add"}}catch(e){y=!0,b=e}finally{try{_||null==S.return||S.return()}finally{if(y)throw b}}}var x='<svg class="fav-icon '.concat(o,'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z"/></svg>');return'\n      <article class="card" id="'.concat(l,'">\n\n        <div class="card__img-container" >\n          <div class="card__blur" id_card="').concat(l,'">\n            <p class="card__already-read">\n              Already read âœ“\n            </p>\n            </div>\n          <img class="card__img" src="').concat(c,'" alt="').concat(a,'">\n          <p class="card__section-name">\n            ').concat(r,'\n          </p>\n          <button class="card__btn" type="button">\n           ').concat(m,"\n          </button>\n          ").concat(x,'\n        </div>\n        <h2 class="card__title">\n          ').concat(u,'\n        </h2>\n        <p class="card__text">').concat(s,'</p>\n        <div class="card__bottom">\n          <span class="card__date">\n            ').concat(t,'\n          </span>\n          <a class="card__read-more-search"\n            href="').concat(i,'" target="_blank"\n          >\n            Read more\n          </a>\n        </div>\n      </article>\n    ')}document.querySelector(".search_mob_btn"),document.querySelector(".search_form"),document.querySelector(".search_input"),document.querySelector(".search_btn");var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var l={};function s(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t,r){t&&s(e.prototype,t);r&&s(e,r);return e};var d=n("hKHmD"),u=function(){"use strict";function t(r,a){var n=this;e(c)(this,t),e(d)(this,"onThemeToggle",(function(){var e=n.getBoolean();e&&localStorage.setItem(n.THEME_STORAGE_KEY,n.Theme.DARK),e||localStorage.setItem(n.THEME_STORAGE_KEY,n.Theme.LIGHT),n.renderTheme()})),this.themeSwitcherEl=r,this.mobileSwitcherEl=a,this.dateField=document.querySelector(".date-field"),this.dataSelected=document.querySelector(".data_selected"),this.currentPage=document.querySelector("body").getAttribute("data-current-page"),this.THEME_STORAGE_KEY="theme",this.Theme={LIGHT:"light",DARK:"dark"}}return e(l)(t,[{key:"renderTheme",value:function(){var e=this.getBoolean();e||(this.themeSwitcherEl.setAttribute("checked",!0),this.mobileSwitcherEl.setAttribute("checked",!0),this.changeBodyClass(this.Theme.DARK,this.Theme.LIGHT),"index"===this.currentPage&&(this.dataSelected.style.color="#F4F4F4",this.dataSelected.style.backgroundColor="#2E2E2E",this.dateField.style.backgroundColor="#2E2E2E")),e&&(this.changeBodyClass(this.Theme.LIGHT,this.Theme.DARK),"index"===this.currentPage&&(this.dataSelected.style.color="#111321",this.dataSelected.style.backgroundColor="#F4F4F4",this.dateField.style.backgroundColor="#F4F4F4"))}},{key:"changeBodyClass",value:function(e,t){document.body.classList.add(e),document.body.classList.remove(t)}},{key:"getBoolean",value:function(){var e=localStorage.getItem(this.THEME_STORAGE_KEY);return e===this.Theme.LIGHT||!e}}]),t}();function v(e){return function(e){return[m(e.getDate()),m(e.getMonth()+1),e.getFullYear()].join("/")}(new Date(e))}function m(e){return e.toString().padStart(2,"0")}function f(e){var t=e.resultsArr,r=e.clickedArticleId,a=e.evt,n="favorites";t.forEach((function(e){if(e.id==r||e.slug_name==r||e._id==r){var t=localStorage.getItem(n);if((t=t?JSON.parse(t):{})[r])return delete t["".concat(r)],"Remove from favorites"===a.target.textContent.trim()&&(a.target.textContent="Add to favorites"),void localStorage.setItem(n,JSON.stringify(t));t[r]=e,localStorage.setItem(n,JSON.stringify(t))}}))}function h(e){var t=e.resultsArr,r=e.clickedArticleId,a=(e.evt,"read");t.forEach((function(e){if(e.id==r||e.slug_name==r||e._id==r){var t=localStorage.getItem(a);t=t?JSON.parse(t):{},e.dateOfReading=(n=(new Date).getDate(),o=(new Date).getMonth()+1,i=(new Date).getFullYear(),"".concat(n,"/").concat(o,"/").concat(i)),t[r]=e,localStorage.setItem(a,JSON.stringify(t))}var n,o,i}))}var g=document.querySelector(".news_container"),_=document.querySelector("body"),y=document.querySelector(".search_form"),b=document.querySelector(".without-news_container"),p="";y.addEventListener("submit",(function(e){e.preventDefault();var t=e.target.elements.searchQuery.value;localStorage.setItem("searchQueryFromFavorites",t),window.open("index.html","_self")}));var S=document.querySelector(".switch_input"),E=document.querySelector(".switch_input--mobile"),w=new u(S,E);E.addEventListener("change",w.onThemeToggle),S.addEventListener("change",w.onThemeToggle),w.renderTheme(),_.addEventListener("click",(function(e){if("card__btn"===e.target.className){var t,r,a,n=(null===(t=e.target.closest(".card"))||void 0===t?void 0:t.id)||(null===(r=e.target.closest(".card"))||void 0===r?void 0:r.slug_name)||(null===(a=e.target.closest(".card"))||void 0===a?void 0:a._id);"Add to favorites"===e.target.textContent.trim()?(e.target.nextElementSibling.classList.remove("fav-icon-add"),e.target.nextElementSibling.classList.add("fav-icon-remove"),e.target.textContent="Remove from favorites"):(e.target.nextElementSibling.classList.remove("fav-icon-remove"),e.target.nextElementSibling.classList.add("fav-icon-add"),e.target.textContent="Add to favorites"),f({resultsArr:T,clickedArticleId:n,evt:e})}})),_.addEventListener("click",(function(e){if("card__read-more-search"===e.target.className){var t,r,a,n=(null===(t=e.target.closest(".card"))||void 0===t?void 0:t.id)||(null===(r=e.target.closest(".card"))||void 0===r?void 0:r.slug_name)||(null===(a=e.target.closest(".card"))||void 0===a?void 0:a._id),o=T;document.querySelector('[id_card="'.concat(n,'"]')).style.display="block",h({resultsArr:o,clickedArticleId:n,evt:e})}}));var T=[];!function(){var e=localStorage.getItem("favorites");if(e&&0!==Object.entries(JSON.parse(e)).length){var t=JSON.parse(e),r=Object.keys(t),a=!0,n=!1,o=void 0;try{for(var c,l=r[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value,d=t["".concat(s)];T.push(d);var u=d.abstract,m=d.published_date,f=d.pub_date,h=d.section,_=d.section_name,y=d.title,S=d.headline,E=d.media,w=d.multimedia,O=d.url,A=d.web_url,x=d.id,k=d._id,I=d.slug_name,D=x||k||I,L=v(m||f),F=h||_,C=y||S.main,q=u,N=O||A,R="";try{D===x&&(R=E[0]["media-metadata"][2].url),D===I&&(R=w[2].url),D===k&&(R="https://www.nytimes.com/"+w[0].url)}catch(e){R="https://t4.ftcdn.net/jpg/00/89/55/15/240_F_89551596_LdHAZRwz3i4EM4J0NHNHy2hEUYDfXc0j.jpg"}p+=i({publishedDate:L,sectionName:F,articleTitle:C,shortDescription:q,urlOriginalArticle:N,imgUrl:R,articleId:D})}}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}g.innerHTML=p}else b.style.display="block"}()}();
//# sourceMappingURL=favorite.6c7aa757.js.map
